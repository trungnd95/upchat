<div class="container">
  <div class="row">
    <div class="add_message">
      <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#gridSystemModal"><i class="fa fa-plus" aria-hidden="true"></i> </button>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-6">
      <div class="panel panel-default">
        <div class="panel-heading text-center">
          <i class="fa fa-envelope" aria-hidden="true"></i>
          <i class="fa fa-share" aria-hidden="true"></i>
          Incoming messages
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
          <ul class="list-received_messages" style="list-style: none">
            <% @messages_received.each do |msg| %>
              <%= render 'received', msg: msg %>
            <% end %>
          </ul>
        </div>
        <!-- /.panel-body -->
      </div>
    </div>
    <!-- /.col-lg-8 -->
    <div class="col-lg-6">
      <!-- <div class="row"> -->
        <!-- <div class="col-md-12"> -->
          <div class="panel panel-default">
            <div class="panel-heading text-center">
              <i class="fa fa-envelope" aria-hidden="true"></i>
              <i class="fa fa-reply" aria-hidden="true"></i>
               Sent Messages
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
              <div class="list-group">
                <ul class="list-sent_messages" style="list-style:none">
                  <% @messages_sent.each do |msg| %>
                    <%= render 'sent', msg: msg %>
                  <% end %>
                </ul>
              </div>
            <!-- </div> -->
          <!-- </div> -->
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel" id="gridSystemModal" >
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <%= form_for Message.new do |f| %>
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="gridSystemModalLabel">Send Messages</h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <%= f.label :recipient_id %>
            <%= f.select :recipient_id, @users.map{|u| [u.email, u.id]}, {}, class: "form-control" %>
          </div>
          <div class="form-group">
            <%= f.label :body %>
            <%= f.text_area :body, placeholder: "Say something ... " , class: "form-control" %>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Send</button>
        </div>
      <% end %>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade detail_message" tabindex="-1" role="dialog" id="detail_message">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Message Content</h4>
      </div>
      <div class="modal-body">
          <div class="message-content">
            <ul style="list-style-type:none">
              <li>Name: <strong class="name"></strong></li>
              <li>Email: <strong class="email"></strong></li>
              <li>Sent at: <strong class="sent_at"></strong></li>
              <li>Content: <p class="content" style="margin-left: 1rem"></p></li>
            </ul>
          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
